{% extends 'PimImportExportBundle:JobProfile:show.html.twig' %}

{% macro magento_configuration(config, violations, jobType, blocks) %}
<table class="configuration">
    <thead></thead>
    <tbody>
        {% for element in blocks %}
            {% if config[element] is defined %}
            <tr>
                <td><b>{{ 'pim_magento_connector.%s.%s.label'|format(jobType, element)|trans }}</b></td>
                <td>{{ config[element]|normalizeValue }} {{ getViolations(violations, element) }}</td>
            </tr>
            {% endif %}
        {% endfor %}
    </tbody>
</table>
{% endmacro %}

{% block configuration %}
    {% for configuration_block in show_configuration %}
        {% set configuration = _self.magento_configuration(
            jobInstance.job.configuration,
            violations,
            action,
            configuration_block['elements'])
        %}
        {{ elements.accordion({ (configuration_block['title']): configuration }, 1, true) }}
    {% endfor %}
{% endblock configuration %}
